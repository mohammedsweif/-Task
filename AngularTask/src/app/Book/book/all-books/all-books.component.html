<div class="container-fluid" style="overflow: hidden;"> 
  <div class="row"> 
 <div style=" margin: 150px; " >
  <button  type="button" class="btn btn-info" data-toggle="modal" data-target="#exampleModal1" data-whatever="@mdo">
    + New Registration
  </button>
</div>

<!-- //model add -->
<div class="modal fade" id="exampleModal1" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel1" aria-hidden="true" data-backdrop="false">
<div class="modal-dialog" role="document">
<div class="modal-content">
<div class="modal-header">
<h5 class="modal-title" id="exampleModalLabel1">New registration</h5>
<button type="button"  class="close" data-dismiss="modal"   aria-label="Close">
<span aria-hidden="true">&times;</span>
</button>
</div>
<div class="modal-body">
  <form class="text-center" [formGroup]="userForm" (ngSubmit)="registerAdd()">
  <!-- Username -->
  <label for="exampleInputEmail1" style="color:royalblue;padding-right: 500px;">Username</label>    
    <input type="text" formControlName="UserName"   class="form-control mb-4" placeholder="UserName">
   <div *ngIf="!this.userForm.get('UserName').valid && this.userForm.get('UserName').touched">
    <small *ngIf="this.userForm.get('UserName').errors.required == true "  class="form-text  text-danger   mb-4">
      {{this.massageValidator.UserName.required}}
    </small>
    <small *ngIf="this.userForm.get('UserName').errors.minlength"  class="form-text  text-danger   mb-4">
      {{this.massageValidator.UserName.minLength}}
    </small>
    <small *ngIf="this.userForm.get('UserName').errors.maxlength"  class="form-text  text-danger   mb-4">
      {{this.massageValidator.UserName.maxlength}}
      
    </small>
  </div>
    <!-- E-mail -->
    <label for="exampleInputEmail1" style="color:royalblue;padding-right: 500px;">Email</label> 
    <input type="email" formControlName="Email"  class="form-control mb-4"   placeholder="E-mail">
    <div *ngIf="!this.userForm.get('Email').valid && this.userForm.get('Email').touched">
    <small *ngIf="this.userForm.get('Email').errors.required == true"  class="form-text text-danger   mb-4">
      {{this.massageValidator.Email.required}}
    </small>
    <small *ngIf="this.userForm.get('Email').errors.pattern"  class="form-text text-danger   mb-4">
        {{this.massageValidator.Email.pattern}}
      </small>
    </div>
 <!-- Jobtitle -->
 <label for="exampleInputEmail1" style="color:royalblue;padding-right: 390px;">Job Title</label> 
 <br>
 <select (change)="changeJobAdd($event.target.value)"  >
  <option selected disabled>--Select Job-- </option>
     <option *ngFor="let item of alljobs" value="{{item.id}}">{{item.jobtitle}}</option>
 </select>
 <br>
 <!-- Department -->
 <label for="exampleInputEmail1" style="color:royalblue;padding-right: 500px;">Department</label> 
 <br>
 <select (change)="changeDepAdd($event.target.value)"   >
  <option selected disabled>--Select Department-- </option>
    <option *ngFor="let item of alldepartments" value="{{item.id}}">{{item.depName}}</option>
 </select>
<br>
<!-- Birth date -->
<label for="exampleInputEmail1" style="color:royalblue;padding-right: 380px;">Birth Date</label> 
<input type="date"  formControlName="date" class="form-control">
<div *ngIf="!this.userForm.get('date').valid && this.userForm.get('date').touched">      
  <small  class="form-text text-danger mb-4" *ngIf="this.userForm.get('date').errors.required == true" >
    {{this.massageValidator.date.required}}
</small>
</div>
   <!-- Mobile no -->
   <label for="exampleInputEmail1" style="color:royalblue;padding-right: 350px;">Mobile Number</label> 
<input type="number"  maxlength="11" formControlName="Mobile" class="form-control" placeholder="Mobile Number" >
   <div *ngIf="!this.userForm.get('Mobile').valid && this.userForm.get('Mobile').touched">      
    <small  class="form-text text-danger mb-4" *ngIf="this.userForm.get('Mobile').errors.required == true" >
      {{this.massageValidator.Mobile.required}}
  </small>
  <small  class="form-text text-danger mb-4" *ngIf="this.userForm.get('Mobile').errors.minLength !== null" >
    {{this.massageValidator.Mobile.minLength}}
  </small>
  
  <small  class="form-text text-danger mb-4" *ngIf="this.userForm.get('Mobile').errors.pattern !== null" >
    {{this.massageValidator.Mobile.pattern}}
  </small>
</div>
<!-- Address -->
<label for="exampleInputEmail1" style="color:royalblue;padding-right: 500px;">Address</label> 
<input type="text"  formControlName="Address"  class="form-control mb-4" placeholder="Address">
<div *ngIf="!this.userForm.get('Address').valid && this.userForm.get('Address').touched">
 <small *ngIf="this.userForm.get('Address').errors.required == true "  class="form-text  text-danger   mb-4">
   {{this.massageValidator.Address.required}}
 </small>
 <small *ngIf="this.userForm.get('Address').errors.minlength"  class="form-text  text-danger   mb-4">
   {{this.massageValidator.Address.minLength}}
 </small>
 <small *ngIf="this.userForm.get('Address').errors.maxlength"  class="form-text  text-danger   mb-4">
   {{this.massageValidator.Address.maxlength}}
   
 </small>
</div>

<label for="exampleInputEmail1" style="color:royalblue;padding-right: 350px;">Choose Photo</label> 
<!-- <input (change)="handleFileInput($event)"  type="file"  id="file" class="inputfile" accept="image/*" /> -->
<input type="file" value="select image" #Image accept="image/*" required (change)="handleFileInput($event.target.files)" />

  <button class="btn btn-login" type="submit" *ngIf="notallow" (click) ="registerAdd()" data-dismiss="modal" [disabled]="this.userForm.invalid  ">Register</button>
</form>

</div>
<div class="modal-footer">
<button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
<!-- Sign up button -->

</div>
</div>
</div>
</div> 




<br>
<h1 style="font-family: Impact, Haettenschweiler, 'Arial Narrow Bold', sans-serif;padding-left: 20px;">Address Book</h1>
<hr>
<!--/*******************************************************************/-->
 

<table class="table table-hover table-dark" >
  <thead>
    <tr>
      <td colspan="4">
        <label style="color: cornflowerblue;padding-right: 5px;padding-left: 5px;">Search </label>
      <input type="search" #f (keyup)="search(f)">
      </td>
      <td colspan="4">
        <label style="color: cornflowerblue;padding-right: 5px;">From </label>
        <input type="date" [(ngModel)]="datefrom" #fr (change)="searchfrom(fr)">
      </td>
      <td colspan="2">
        <label style="color: cornflowerblue;padding-right: 5px;">To </label>
        <input type="date" [(ngModel)]="dateto" #to (change)="searchto(to)"></td>
<td><a href="http://localhost:50565/Book/Exel" class="btn btn-warning  " *ngIf="candownload()">download</a></td>
    </tr>
    <tr >
      <th scope="col">#</th>
      <th scope="col">Photo</th>
      <th scope="col">FullName</th>
      <th scope="col">jobTitle</th>
      <th scope="col">department</th>
      <th scope="col">mobile</th>
      <th scope="col">birthDate</th>
      <th scope="col">address</th>
      <th scope="col">email</th>
      <th scope="col">age</th>
      <th scope="col">operation</th>
    </tr>
  </thead>
  <tbody>
    <ng-container *ngFor="let item of allbooks|paginate: this.config;let x=index">
    <ng-container *ngIf="(item.birthDate)>=(datefrom | date : 'yyyy-MM-dd') && (dateto | date : 'yyyy-MM-dd')>=(item.birthDate) ">
    <tr *ngIf="item.fullName.startsWith(searchvalue)||item.email.startsWith(searchvalue)||item.address.startsWith(searchvalue)||item.mobile.startsWith(searchvalue)||item.depName.depName.startsWith(searchvalue)||item.jobtitle.jobtitle.startsWith(searchvalue) ||searchvalue == ''">  
      <th scope="row">{{x+1}}</th>
      <td><img [src]="item.photo" alt="{{item.fullName}}:image" style="width:100px;height: 100px;;;max-width: 100px;max-height: 100px;"></td>
      <td>{{item.fullName}}</td>
      <td>{{item.jobtitle.jobtitle}}</td>
      <td>{{item.depName.depName}}</td>
      <td>{{item.mobile}}</td>
      <td>{{item.birthDate}}</td>
      <td>{{item.address}}</td>
      <td>{{item.email}}</td>
      <td>{{item.age}}</td>
      <td>
        <div class="row">
          <div class="col-6">
            <button class="btn btn-sm btn-success"  data-toggle="modal" data-target="#exampleModal" (click)="showupdate(item)">update</button>
            <div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel1" aria-hidden="true" data-backdrop="false">
              <div class="modal-dialog" role="document">
              <div class="modal-content">
              <div class="modal-header">
              <h5 class="modal-title" id="exampleModalLabel1">New registration</h5>
              <button type="button"  class="close" data-dismiss="modal"   aria-label="Close">
              <span aria-hidden="true">&times;</span>
              </button>
              </div>
              <div class="modal-body">
                <form class="text-center" [formGroup]="userForm" #f (ngSubmit)="registerEdit()" >
                <!-- Username -->
                <label for="exampleInputEmail1" style="color:royalblue;padding-right: 500px;">Username</label>    
                  <input type="text" formControlName="UserName" [(ngModel)]="onebook.fullName"  class="form-control mb-4" placeholder="UserName">
                 <div *ngIf="!this.userForm.get('UserName').valid && this.userForm.get('UserName').touched">
                  <small *ngIf="this.userForm.get('UserName').errors.required == true "  class="form-text  text-danger   mb-4">
                    {{this.massageValidator.UserName.required}}
                  </small>
                  <small *ngIf="this.userForm.get('UserName').errors.minlength"  class="form-text  text-danger   mb-4">
                    {{this.massageValidator.UserName.minLength}}
                  </small>
                  <small *ngIf="this.userForm.get('UserName').errors.maxlength"  class="form-text  text-danger   mb-4">
                    {{this.massageValidator.UserName.maxlength}}
                    
                  </small>
                </div>
                  <!-- E-mail -->
                  <label for="exampleInputEmail1" style="color:royalblue;padding-right: 500px;">Email</label> 
                  <input type="email" formControlName="Email" [(ngModel)]="onebook.email" class="form-control mb-4"   placeholder="E-mail">
                  <div *ngIf="!this.userForm.get('Email').valid && this.userForm.get('Email').touched">
                  <small *ngIf="this.userForm.get('Email').errors.required == true"  class="form-text text-danger   mb-4">
                    {{this.massageValidator.Email.required}}
                  </small>
                  <small *ngIf="this.userForm.get('Email').errors.pattern"  class="form-text text-danger   mb-4">
                      {{this.massageValidator.Email.pattern}}
                    </small>
                  </div>
               <!-- Jobtitle -->
               <label for="exampleInputEmail1" style="color:royalblue;padding-right: 390px;">Job Title</label> 
               <br>
               <select (change)="changeJobEdit($event.target.value)"  >
                <option selected disabled>--Select Job-- </option>
                   <option *ngFor="let item of alljobs" value="{{item.id}}">{{item.jobtitle}}</option>
               </select>
               <br>
               <!-- Department -->
               <label for="exampleInputEmail1" style="color:royalblue;padding-right: 500px;">Department</label> 
               <br>
               <select (change)="changeDepEdit($event.target.value)" >
                <option selected disabled>--Select Department-- </option>
                  <option *ngFor="let item of alldepartments" value="{{item.id}}">{{item.depName}}</option>
               </select>
              <br>
              <!-- Birth date -->
              <label for="exampleInputEmail1" style="color:royalblue;padding-right: 380px;">Birth Date</label> 
              <input type="date" formControlName="date" [(ngModel)]="onebook.birthDate" class="form-control">
              <div *ngIf="!this.userForm.get('date').valid && this.userForm.get('date').touched">      
                <small  class="form-text text-danger mb-4" *ngIf="this.userForm.get('date').errors.required == true" >
                  {{this.massageValidator.date.required}}
              </small>
              </div>
                 <!-- Mobile no -->
                 <label for="exampleInputEmail1" style="color:royalblue;padding-right: 350px;">Mobile Number</label> 
              <input type="number" maxlength="11" formControlName="Mobile" [(ngModel)]="onebook.mobile" class="form-control" placeholder="Mobile Number" >
                 <div *ngIf="!this.userForm.get('Mobile').valid && this.userForm.get('Mobile').touched">      
                  <small  class="form-text text-danger mb-4" *ngIf="this.userForm.get('Mobile').errors.required == true" >
                    {{this.massageValidator.Mobile.required}}
                </small>
                <small  class="form-text text-danger mb-4" *ngIf="this.userForm.get('Mobile').errors.minLength !== null" >
                  {{this.massageValidator.Mobile.minLength}}
                </small>
                
                <small  class="form-text text-danger mb-4" *ngIf="this.userForm.get('Mobile').errors.pattern !== null" >
                  {{this.massageValidator.Mobile.pattern}}
                </small>
              </div>
              <!-- Address -->
              <label for="exampleInputEmail1" style="color:royalblue;padding-right: 500px;">Address</label> 
              <input type="text" formControlName="Address" [(ngModel)]="onebook.address" class="form-control mb-4" placeholder="Address">
              <div *ngIf="!this.userForm.get('Address').valid && this.userForm.get('Address').touched">
               <small *ngIf="this.userForm.get('Address').errors.required == true "  class="form-text  text-danger   mb-4">
                 {{this.massageValidator.Address.required}}
               </small>
               <small *ngIf="this.userForm.get('Address').errors.minlength"  class="form-text  text-danger   mb-4">
                 {{this.massageValidator.Address.minLength}}
               </small>
               <small *ngIf="this.userForm.get('Address').errors.maxlength"  class="form-text  text-danger   mb-4">
                 {{this.massageValidator.Address.maxlength}}
                 
               </small>
              </div>
              
              <label for="exampleInputEmail1" style="color:royalblue;padding-right: 350px;">Choose Photo</label> 
              
              <input type="file" value="select image"   #Image accept="image/*" required (change)="handleFileInput($event.target.files)" />

              <button class="btn   btn-login"  type="submit"  [disabled]="this.userForm.invalid " >Update</button>
              </form>


              
              </div>
              <div class="modal-footer">
              <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
              <!-- Sign up button -->
              
              </div>
              </div>
              </div>
              </div> 
          </div>
          <div class="col-6">
           
            <button class="btn btn-danger" data-target="#deletedep" (click)="deletebook(item.id)" data-toggle="modal" data-backdrop="false" >delete</button>
              <div id="deletedep" class="modal fade">
                <div class="modal-dialog">
                    <div class="modal-content">
                        
                            <div class="modal-header">
                                <h4 style="color: black;" class="modal-title">Delete Address Book</h4>
                                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                            </div>
                            <div class="modal-body">
                                <p style="color: black;">Are you sure you want to delete this Address Book?</p>
                                <p class="text-warning"><small>This Address Book will be removed permanentely.</small></p>
                            </div>
                            <div class="modal-footer">
                                <input type="button" class="btn btn-default" data-dismiss="modal" value="Cancel">
                                <input type="submit" (click)="delete()" data-dismiss="modal" class="btn btn-danger" value="Delete">
                            </div>
                        
                    </div>
                </div>
            </div>
            
          </div>
        </div>
          
          
      </td>
    </tr></ng-container></ng-container>
    
  </tbody>
</table>
<pagination-controls (pageChange)="pageChanged($event)"></pagination-controls>
  </div></div>